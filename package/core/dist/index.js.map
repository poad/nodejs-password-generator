{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"AAAA;;;CAGC,GACD,MAAM,SAAS,OAAO,WAAW,cAAc,OAAO,MAAM,GAAG,WAAW,MAAM;AAEhF;;;;;;CAMC,GACD,eAAe,iBAAiB,SAAS,EAAE;IACzC,OAAO,4BAA4B;QACjC;QACA,kBAAkB;QAClB,kBAAkB;QAClB,eAAe;QACf,gBAAgB;IAClB;AACF;AAoBA;;;;;;;;;;;;;;;;;;;;;CAqBC,GACD,eAAe,4BAA4B,UAA2B;IAAE,QAAQ;AAAG,CAAC;IAClF,gBAAgB;IAChB,MAAM,YAAY;IAClB,MAAM,YAAY;IAClB,MAAM,SAAS;IACf,MAAM,UAAU;IAEhB,aAAa;IACb,MAAM,EACJ,SAAS,EAAE,EACX,mBAAmB,IAAI,EACvB,mBAAmB,IAAI,EACvB,gBAAgB,IAAI,EACpB,iBAAiB,IAAI,EACtB,GAAG;IAEJ,eAAe;IACf,MAAM,WAAW;QACf,oBAAoB;QACpB,oBAAoB;QACpB,iBAAiB;QACjB,kBAAkB;KACnB,CAAC,MAAM,CAAC;IAET,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO;IACT;IAEA,MAAM,WAAW,SAAS,IAAI,CAAC;IAE/B;;;;;KAKG,GACH,MAAM,gBAAgB,OAAO;QAC3B,MAAM,QAAQ,IAAI,YAAY;QAC9B,OAAO,eAAe,CAAC;QACvB,OAAO,OAAO,CAAC,KAAK,CAAC,EAAE,GAAG,QAAQ,MAAM,CAAC;IAC3C;IAEA,8BAA8B;IAC9B,MAAM,gBAAgB,MAAM,QAAQ,GAAG,CACrC,SAAS,GAAG,CAAC,CAAA,UAAW,cAAc;IAGxC,WAAW;IACX,MAAM,iBAAiB,MAAM,QAAQ,GAAG,CACtC,MAAM,SAAS,cAAc,MAAM,EAChC,IAAI,CAAC,MACL,GAAG,CAAC,IAAM,cAAc;IAG7B;;;;;KAKG,GACH,MAAM,UAAU,OAAU;QACxB,MAAM,SAAS;eAAI;SAAM;QACzB,MAAM,cAAc,IAAI,YAAY,OAAO,MAAM;QACjD,OAAO,eAAe,CAAC;QACvB,OAAO,OAAO,GAAG,CAAC,CAAC,GAAG,OAAO;YAC3B,MAAM,cAAc,QAAS,WAAW,CAAC,MAAM,GAAI,CAAA,IAAI,MAAM,GAAG,KAAI;YACpE,MAAM,cAAc,GAAG,CAAC,YAAY;YACpC,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,MAAM;YAC7B,OAAO;QACT;IACF;IAEA,mBAAmB;IACnB,MAAM,WAAW,MAAM,QAAQ;WAAI;WAAkB;KAAe;IACpE,OAAO,SAAS,IAAI,CAAC;AACvB;AAEA,eAAe;IACb;IACA;AACF,EAAE","file":"index.js","sourcesContent":["/**\n * クロスプラットフォーム対応のための暗号化API参照\n * ブラウザ環境とNode.js環境の両方で動作するように設定\n */\nconst crypto = typeof window !== 'undefined' ? window.crypto : globalThis.crypto;\n\n/**\n * デフォルトのパスワード生成関数\n * すべての文字種（大文字、小文字、数字、記号）を含むパスワードを生成\n *\n * @param length - パスワードの長さ（デフォルト: 16文字）\n * @returns 生成されたパスワード文字列、または生成失敗時はundefined\n */\nasync function generatePassword(length = 16): Promise<string | undefined> {\n  return generatePasswordWithOptions({\n    length,\n    includeUpperCase: true,\n    includeLowerCase: true,\n    includeDigits: true,\n    includeSymbols: true,\n  });\n};\n\n/**\n * パスワード生成のオプション設定用インターフェース\n */\ninterface PasswordOptions {\n  /** パスワードの長さ */\n  length: number;\n  /** 大文字を含めるかどうか */\n  includeUpperCase?: boolean;\n  /** 小文字を含めるかどうか */\n  includeLowerCase?: boolean;\n  /** 数字を含めるかどうか */\n  includeDigits?: boolean;\n  /** 記号を含めるかどうか */\n  includeSymbols?: boolean;\n  /** カスタム記号セット（未実装） */\n  customSymbols?: string;\n}\n\n/**\n * カスタマイズ可能なパスワード生成関数\n *\n * @param options - パスワード生成オプション\n * @returns 生成されたパスワード文字列、または生成失敗時はundefined\n *\n * @remarks\n * - 暗号学的に安全な乱数生成を使用\n * - 選択された各文字種から最低1文字を含むことを保証\n * - 最終的なパスワードはランダムにシャッフル\n *\n * @example\n * ```typescript\n * const password = await generatePasswordWithOptions({\n *   length: 12,\n *   includeUpperCase: true,\n *   includeLowerCase: true,\n *   includeDigits: false,\n *   includeSymbols: true\n * });\n * ```\n */\nasync function generatePasswordWithOptions(options: PasswordOptions = { length: 16 }): Promise<string | undefined> {\n  // 使用可能な文字セットの定義\n  const upperCase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  const lowerCase = 'abcdefghijklmnopqrstuvwxyz';\n  const digits = '0123456789';\n  const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';\n\n  // デフォルトオプション\n  const {\n    length = 16,\n    includeUpperCase = true,\n    includeLowerCase = true,\n    includeDigits = true,\n    includeSymbols = true,\n  } = options;\n\n  // 使用する文字セットを構築\n  const charsets = [\n    includeUpperCase && upperCase,\n    includeLowerCase && lowerCase,\n    includeDigits && digits,\n    includeSymbols && symbols,\n  ].filter(Boolean) as string[];\n\n  if (charsets.length === 0) {\n    return undefined;\n  }\n\n  const allChars = charsets.join('');\n\n  /**\n     * 指定された文字セットからランダムな1文字を生成\n     *\n     * @param charset - 文字セット\n     * @returns ランダムに選択された1文字\n     */\n  const getRandomChar = async (charset: string): Promise<string> => {\n    const array = new Uint32Array(1);\n    crypto.getRandomValues(array);\n    return charset[array[0] % charset.length];\n  };\n\n  // 必須文字の生成（選択された各文字セットから1文字ずつ）\n  const requiredChars = await Promise.all(\n    charsets.map(charset => getRandomChar(charset)),\n  );\n\n  // 残りの文字を生成\n  const remainingChars = await Promise.all(\n    Array(length - requiredChars.length)\n      .fill(null)\n      .map(() => getRandomChar(allChars)),\n  );\n\n  /**\n     * 配列の要素をランダムにシャッフル\n     *\n     * @param array - シャッフルする配列\n     * @returns シャッフルされた新しい配列\n     */\n  const shuffle = async <T>(array: T[]): Promise<T[]> => {\n    const result = [...array];\n    const randomArray = new Uint32Array(result.length);\n    crypto.getRandomValues(randomArray);\n    return result.map((_, index, arr) => {\n      const randomIndex = index + (randomArray[index] % (arr.length - index));\n      const randomValue = arr[randomIndex];\n      arr[randomIndex] = arr[index];\n      return randomValue;\n    });\n  };\n\n  // すべての文字を結合してシャッフル\n  const shuffled = await shuffle([...requiredChars, ...remainingChars]);\n  return shuffled.join('');\n};\n\nexport default {\n  generatePassword,\n  generatePasswordWithOptions,\n};\n"]}